{# <p><a href="{% url new_encounter patient.get_id %}">+ new encounter</a></p> #}
<table class="touchscreen" style="margin-left:-18px">
{% for encounter in encounters %}
    {% if forloop.first %}
        <thead>
            <th></th>
            <th>Date</th>
            <th>Visit Type</th>
            <th>Case Outcome</th>
        </thead>
        <tbody>
    {% endif %}
    {% if forloop.counter < 10 %}
        <tr>
            <td class="{{ encounter.dynamic_data.classification }}"></td>
            <td nowrap="true">{% if debug %}<a href="{% url sofa encounter.xform_id %}">{% endif %}
                {{ encounter.visit_date|date:"d M Y"|default:"No date found" }}
                {% if debug %}</a>{% endif %}
            </td>
            <td nowrap="true"><a href="{% url single_encounter patient.get_id encounter.get_id %}">{{ encounter.display_type }}</a></td>
            <td>{{ encounter.dynamic_data.case.closed|yesno:"closed,open"}} {% if encounter.dynamic_data.case.outcome %} ({{ encounter.dynamic_data.case.formatted_outcome }}) {% endif %}</td>
        </tr>
    {% endif %}
    {% if forloop.last %}
        </tbody>
    {% endif %}
{% empty %}
    <tr>
        <p>There aren't any visits recorded for this patient.</p>
        <p>Record a visit using the buttons to the right.</p>
    </tr>
{% endfor %}
</table>
