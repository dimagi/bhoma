{% load shared_tags %}
{% for clinic in rows %}
<h3>Performance Indicator Summary for {{ clinic_names|array_lookup:forloop.counter0 }}: </h3>

<div id="placeholder_summary{{ forloop.counter0 }}" style="width:950px;height:{{height}}px;"></div> 

<script id="source" language="javascript" type="text/javascript"> 
$(function () {

    var clinic_data = [{{ clinic }}];
    var pi_labels = {{ headings|safe }};
    var placeholder_summary = $("#placeholder_summary{{ forloop.counter0 }}");
     
 
    var summary_plot = $.plot(placeholder_summary, clinic_data, {
	    	bars: { show: true, horizontal: true, align: "center", barWidth: 0.6 },
	    	xaxis: { min: 0 },
	    	yaxis: { min: 0, max: pi_labels.length+1, ticks: [] }
	    });
    

	// add labels
    var o;
    for (var i = 0; i < pi_labels.length; i += 1) {
        o = summary_plot.pointOffset({ x: 0, y: i+1.2});
        placeholder_summary.append('<div style="position:absolute;left:' + (o.left + 4) + 'px;top:' + o.top + 'px;color:#666;font-size:small">' + pi_labels[i] + '</div>');
	}
    
})
</script>
{% endfor %}