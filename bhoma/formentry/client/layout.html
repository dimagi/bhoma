<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="content-type" content="text/html;charset=UTF-8" />
    <script language="javascript" type="text/javascript" src="layout.js"></script>   
    
    <script language="javascript">
    
gSceneGraph = null;

SCREEN_BORDER = 10;
SCREEN_MARGIN = 10;
SECTION_MARGIN = 6;
HEADER_HEIGHT = 60;
FOOTER_HEIGHT = 80;
FOOTER_BUTTON_WIDTH = 150;
FOOTER_BUTTON_SPACING = 6;

BORDER_COLOR = '#000';
MAIN_COLOR = '#eef';
HEADER_COLOR = '#dde';
FOOTER_COLOR = '#abd';
BUTTON_TEXT_COLOR = '#fff';
TEXT_COLOR = '#000';
KEYBUTTON_COLOR = '#118';

function init () {
  questionCaption = new Indirect();
  questionEntry = new Indirect();
  progressBar = new Indirect();
  
  gSceneGraph = new Layout('main', 3, 1, '*', [HEADER_HEIGHT, '*', FOOTER_HEIGHT], SCREEN_BORDER, 0, MAIN_COLOR, BORDER_COLOR, null, [
    new Layout('header', 1, 1, '*', '*', [SCREEN_MARGIN, SCREEN_MARGIN, SCREEN_MARGIN, SECTION_MARGIN], 0, HEADER_COLOR, HEADER_COLOR, HEADER_COLOR, [
      new Layout('top-bar', 1, 2, ['*', 50], '*', 0, 5, null, null, null, [
        questionCaption,
        new TextButton('help-button', '#aaa', BUTTON_TEXT_COLOR, null, null, '?', 1., null)
      ])
    ]),
    new Layout('entry', 1, 1, '*', '*', [SCREEN_MARGIN, SCREEN_MARGIN, 0, 0], 0, null, null, null, [questionEntry]),
    new Layout('footer', 1, 4, [FOOTER_BUTTON_WIDTH, FOOTER_BUTTON_WIDTH, '*', FOOTER_BUTTON_WIDTH], '*',
               [SCREEN_MARGIN, SCREEN_MARGIN, SECTION_MARGIN, SCREEN_MARGIN], FOOTER_BUTTON_SPACING, FOOTER_COLOR, FOOTER_COLOR, FOOTER_COLOR, [
      new TextButton('back-button', '#6ad', BUTTON_TEXT_COLOR, null, null, 'BACK', 1., null),
      new TextButton('quit-button', '#d23', BUTTON_TEXT_COLOR, null, null, 'MENU', 1., null),
      progressBar,
      new TextButton('next-button', '#1a3', BUTTON_TEXT_COLOR, null, null, 'NEXT', 1.2, null)
    ]),
  ]);

  freeEntryKeyboard = new Indirect();
  freeEntry = new Layout('free-entry', 2, 1, '*', [110, '*'], 0, 0, null, null, null, [
    new Layout('answer-bar', 1, 2, ['7*', '*'], '*', [30, 30, 20, 20], 6, null, null, null, [
      new Layout('textbox', 1, 1, '*', '*', 3, 0, '#fff', '#000', null, [null]),
      new TextButton('clear-button', '#aaa', BUTTON_TEXT_COLOR, null, null, 'CLEAR', 0.8, null)
    ]),
    new Layout('kbd', 1, 1, '*', '*', [10, 10, 0, 5], 0, null, null, null, [freeEntryKeyboard])
  ]);
  
  function kb (lab, sz, col) {
    if (col == null)
      col = KEYBUTTON_COLOR;
    return new TextButton('button-' + lab, col, BUTTON_TEXT_COLOR, null, null, lab, sz, null);
  }
  
  function nkb (lab, col) {
    return kb(lab, 2., col);
  }

  numPad = new Layout('numpad', 4, 3, 105, 105, '*', 15, null, null, null, [
    nkb('1'), nkb('2'), nkb('3'), nkb('4'), nkb('5'), nkb('6'), nkb('7'), nkb('8'), nkb('9'), null, nkb('0'), nkb('\u21d0', '#aaa')
  ]);
  
  function tkb (lab, col) {
    return kb(lab, 1.5, col);
  }
  
  kbd = new Layout('text-kbd', 4, 13, 68, 85, '*', 6, null, null, null, [
    tkb('A'), tkb('B'), tkb('C'), tkb('D'), tkb('E'), tkb('F'), tkb('G'), tkb('H'), tkb('I'), tkb('7'),
    tkb('8'), tkb('9'), tkb('\u21d0', '#aaa'), tkb('J'), tkb('K'), tkb('L'), tkb('M'), tkb('N'), tkb('O'), tkb('P'),
    tkb('Q'), tkb('R'), tkb('4'), tkb('5'), tkb('6'), tkb(' '), tkb('S'), tkb('T'), tkb('U'), tkb('V'),
    tkb('W'), tkb('X'), tkb('Y'), tkb('Z'), tkb('0'), tkb('1'), tkb('2'), tkb('3'), tkb('.'), tkb('\u2013'),
    tkb('+'), tkb('%'), tkb('&'), tkb('*'), tkb('/'), tkb(':'), tkb(';'), tkb('('), tkb(')'), tkb('!'),
    tkb('?'), tkb(',')
  ]);
  
  function ckb (lab, col) {
    return kb(lab, 1.8, col);
  }
  choice = new Layout('ch', 4, 2, 400, 100, [30, '*', '*', '*'], 20, null, null, null, [
    ckb('Apple'), ckb('Orange'), ckb('Pear'), ckb('Guava'), ckb('Lychee'), null, ckb('Banana'), null
  ]);
  
  progressBar.content = new Layout('progress-bar', 1, 2, ['30%', '*'], '*', [10, 10, 15, 15], 0, null, null, null, [
    new Layout('pb0', 1, 1, '*', '*', 0, 0, '#4d6', null, null, [null]),   
    new Layout('pb0', 1, 1, '*', '*', 0, 0, HEADER_COLOR, null, null, [null])   
  ]);
  
  questionCaption.content = new TextCaption('q-caption', TEXT_COLOR, 'What are your symptoms?', 1., 'left', 'top');
  questionEntry.content = freeEntry;
  freeEntryKeyboard.content = kbd;
  
  redraw();
}

function redraw () {
  render_viewport('viewport', gSceneGraph);
}
  
    </script>
    
  </head>
  <body id="body" onLoad="init();" style="font-family: sans-serif; font-size: xx-large;">
    <div id="viewport" style="position: absolute; left: 0px; top: 50px; width: 1024px; height: 768px; background-color: red; margin: 15px;"></div>

   
    <button onClick="freeEntryKeyboard.content = numPad; redraw();">numeric entry</button>
    <button onClick="freeEntryKeyboard.content = kbd; redraw();">text entry</button>
    <button onClick="freeEntryKeyboard.content = choice; redraw();">multiple choice</button>
  </body>
</html>

